<html>
	<head>
		<script type="text/javascript">
			var sitemap = {
				l: "Translating Tathagata",
				t: "This website is ... (second commit)",
				c: [
					{
						l: "Books",
						c: [
							{
								l: "Lamentation",
								t_url: "https://raw.githubusercontent.com/TranslatingTathagata/Translations/master/Books%20-%20Lamentation/Lamentation%20-%20English%20-%20translated%20by%20J_lee_77777.txt"
							}
						]
					},
					{
						l: "Guide",
						c: [

						]
					},
					{
						l: "Nature's Teaching",
						c: [
							{

							}
						]
					},
					{
						l: "Tathagata",
						c: [

						],
					},
					{
						l: "Teaching"
					}
				]
			};
			function render(obj_children, parent_orNil)
			{
				var parent = parent_orNil;
				if (typeof parent_orNil === 'undefined' || !parent_orNil) {
					parent = document.body
				}
				let ul = document.createElement("ul")
				console.log("parent" , parent)
				parent.appendChild(ul)
				if (typeof obj_children === 'undefined' || !obj_children || obj_children.length <= 0) {
					throw "Expected render() to be called with non-empty obj.c list"
				}
				for (let i in obj_children) {
	 				let v = obj_children[i]
					let label = v.l
					let embedded_text = v.t
					let text_source_url = v.t_url
					let children = v.c
					let li = document.createElement("li")
					var html = "<span>"
					html += label
					if (typeof embedded_text !== 'undefined' && embedded_text) {
						html += embedded_text
					} else if (typeof text_source_url !== 'undefined' && text_source_url) {
						var xhr = new XMLHttpRequest();
					    xhr.open('GET', text_source_url, false);
					    xhr.send();
						if (xhr.status != 200) {
							alert("Error loading " + text_source_url);
						} else {
							html += xhr.responseText;
							// TODO: format this ... if it ends in .txt, ... if it ends in .md ……
						}
					}
					html += "</span>"
					li.innerHTML = html
					if (typeof children !== 'undefined' && children && children.length > 0) {
						render(children, li);
					}
					ul.appendChild(li)
				}
			}
			const dom_loaded = function()
			{
				render([ sitemap ], null);
			};
			if (document.readyState === "complete" || (document.readyState !== "loading" && !document.documentElement.doScroll)) {
				dom_loaded();
			} else {
				document.addEventListener("DOMContentLoaded", dom_loaded);
			}
		</script>
	</head>
	<body>
	</body>
</html>